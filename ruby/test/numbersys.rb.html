<html>
<!-- -*- html -*- -->





<head>
  <title> ./ruby/test/numbersys.rb </title>
</head>

<body>

  <h1> <a href="../../.">.</a>/<a href="../.">ruby</a>/<a href=".">test</a>/numbersys.rb </h1>

  <a href="numbersys.rb">download original</a>

  <pre>
def tonum(numstr,base)
  if (numstr=="")
    0
  else
    numstr.downcase!
    least = digit2num(numstr[-1])
    least + base * tonum(numstr[0...(numstr.length-1)],base)
  end
end



def tobase(num,base)
  return "-"+tobase(-num,base) if num&lt;0
  if (num==0)
    ""
  else
    tobase(num/base,base) + num2digit(num%base)
  end
end


def digit2num(digitchar)
  if (digitchar &lt; "0"[0] or digitchar &gt; "9"[0])
    10 + digitchar - "a"[0]
  else
    digitchar - "0"[0]
  end
end


def num2digit(num)
  if (num&gt;=0 and num&lt;=9)
    (num+"0"[0]).chr
  else
    (num-10+"a"[0]).chr
  end
end


#####

for name,base in [["bin",2],["oct",8],["dec",10],["hex",16]]

eval &lt;&lt;EOS
  def #{name}2num(val)
    tonum(val,#{base})
  end

  def to#{name}(num)
    tobase(num,#{base})
  end
EOS

end


def baseconvert(numstr,srcbase,targetbase)
  tobase(tonum(numstr,srcbase),targetbase)
end

  </pre>

  <a href="."> back to test </a>

  <p/>

  <font size="-3">(C) 1998-2016 Olaf Klischat  &lt;olaf.klischat@gmail.com&gt; </font>

</body>

</html>
